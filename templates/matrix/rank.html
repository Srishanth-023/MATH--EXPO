{% extends "matrix/base.html" %}

{% block title %}Matrix Calculator - Rank{% endblock %}

{% block header %}Matrix Rank{% endblock %}

{% block content %}
<div class="operation-description">
    <p>The rank of a matrix is the dimension of the vector space generated by its columns (or equivalently, by its rows). It is equal to the number of linearly independent columns or rows of the matrix.</p>
</div>

<form class="matrix-form" method="POST">
    <div class="matrix-dimensions">
        <div class="dimension-control">
            <label>Matrix Dimensions:</label>
            <div class="dimension-inputs">
                <input type="number" id="rows" name="rows" min="1" max="10" value="2" required>
                <span>Ã—</span>
                <input type="number" id="cols" name="cols" min="1" max="10" value="3" required>
                <button type="button" class="generate-btn" onclick="generateMatrix()">Generate</button>
            </div>
        </div>
    </div>
    
    <div class="matrices-container">
        <div class="matrix-wrapper full-width">
            <h3>Matrix</h3>
            <div id="matrix_container">
                <!-- Matrix will be inserted here -->
                <div class="matrix-input-container" id="matrix">
                    <table class="matrix-table">
                        {% for i in range(2) %}
                        <tr>
                            {% for j in range(3) %}
                            <td>
                                <input type="number" step="any" name="matrix_{{ i }}_{{ j }}" placeholder="0" required>
                            </td>
                            {% endfor %}
                        </tr>
                        {% endfor %}
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <div class="controls">
        <button type="submit" class="calculate-btn">Calculate</button>
        <button type="reset" class="reset-btn">Reset</button>
    </div>
    
    {% if result is not none %}
    <div class="result-container">
        <h3>Result:</h3>
        <div class="scalar-result">
            <p>Rank = {{ result }}</p>
        </div>
    </div>
    {% endif %}
</form>

<script>
function generateMatrix() {
    const rows = document.getElementById('rows').value;
    const cols = document.getElementById('cols').value;
    
    fetch('/generate_matrix', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/x-www-form-urlencoded',
        },
        body: `rows=${rows}&cols=${cols}&matrix_id=matrix`
    })
    .then(response => response.text())
    .then(html => {
        document.getElementById('matrix_container').innerHTML = html;
    });
}
</script>
{% endblock %}